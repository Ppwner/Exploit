from pwn import *

def getNC():
    p.recvuntil("N=")
    N = p.recvuntil(" ")[:-1]
    p.recvuntil("C=")
    C = p.recvline()[:-1]
    return (N,C)


def solver(N,C):
    start = 0
    for k in range(1, C+1):
        data = ''
        log.info("start=%d end=%d" % (start, N//(2**k)))
        for i in range(0, N//(2**k)+1):
            data += str(start + i) + ' '

        p.sendline(data)
        result = int(p.recvline()[:-1])

        if result % 10 == 0:
            start = start + N//(2**k) + 1
    print start
    p.sendline(str(start))
if __name__ == '__main__':
    p = remote("0", 9007)
    #context.log_level='debug'
    p.recvuntil("- Ready? starting in 3 sec... -\n")

    for i in range(0,100):
        N, C = getNC()
        N = int(N)
        C = int(C)
        print("-"*5 + "Round %d" % (i+1) + "-"*5)
        log.info("N=%d C=%d" % (N, C))

        solver(N,C)
    p.interactive()